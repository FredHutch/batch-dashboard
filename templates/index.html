{% extends "layout.html" %}
{% block title %}Dashboard{% endblock %}
{% block pagejs %}
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/1.4.2/js/dataTables.buttons.min.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/1.4.2/js/buttons.flash.min.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.32/pdfmake.min.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.32/vfs_fonts.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/1.4.2/js/buttons.html5.min.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/1.4.2/js/buttons.print.min.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/1.3.1/js/buttons.bootstrap.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.3/chosen.jquery.min.js"></script>
<!-- FIXME eventually remove the timestamp bit from here: -->
<script type="text/javascript" charset="utf8" src="/js/batch-dashboard.js?timestamp={{timestamp}}"></script>{% endblock %}
{% block content %}
{# modals #}

{# queue modal #}
<div class="modal fade" id="queue_dialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close btn btn-default" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="dialog_queue_header">Queue queueName</h4>
      </div>
      <div class="modal-body">
        <h3>Overview</h3>

        <table border="0" class="paddingBetweenCols">
          <tr>
            <th align="right"><b>Queue name: </b></th>
            <th align="left" id="dialog_queue_name"></th>
          </tr>
          <tr>
            <th align="right"><b>Queue state: </b></th>
            <th align="left" id="dialog_queue_state"></th>
          </tr>
          <tr>
            <th align="right"><b>Priority: </b></th>
            <th align="left" id="dialog_queue_priority"></th>
          </tr>
        </table>

        <h3>Compute Environments</h3>

        <table id="dialog_queue_env_table" class="paddingBetweenCols dynamicDialogTable">
          <tr>
            <th>Order</th>
            <th>Compute environment</th>
          </tr>
        </table>

      </div>
      <div class="modal-footer">
        <button type="button" id="dialog_queue_close" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>


{# compute environment modal #}
<div class="modal fade" id="env_dialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
          {#  FIXME this does not close #}
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="dialog_env_header">Compute environment details</h4>
      </div>
      <div class="modal-body">
        <h3>Overview</h3>

        <table border="0" class="paddingBetweenCols">
          <tr>
            <th align="right"><b>Compute environment name:</b></th>
            <th align="left" id="dialog_env_name"></th>
          </tr>
          <tr>
            <th align="right"><b>Compute environment ARN:</b></th>
            <th align="left" id="dialog_env_arn"></th>
          </tr>
          <tr>
            <th align="right"><b>Type:</b></th>
            <th align="left" id="dialog_env_type"></th>
          </tr>
          <tr>
            <th align="right"><b>Status:</b></th>
            <th align="left" id="dialog_env_status"></th>
          </tr>
          <tr>
            <th align="right"><b>State:</b></th>
            <th align="left" id="dialog_env_state"></th>
          </tr>
          <tr>
            <th align="right"><b>Service role:</b></th>
            <th align="left" id="dialog_env_service_role"></th>
          </tr>
        </table>

        <h2>Compute Resources</h2>

        <table border="0" class="paddingBetweenCols">
          <tr>
            <th align="right"><b>Minimum vCPUs:</b></th>
            <th align="left" id="dialog_env_minvcpus"></th>
          </tr>
          <tr>
            <th align="right"><b>Desired vCPUs:</b></th>
            <th align="left" id="dialog_env_desiredvcpus"></th>
          </tr>
          <tr>
            <th align="right"><b>Maximum vCPUs:</b></th>
            <th align="left" id="dialog_env_maxvcpus"></th>
          </tr>
          <tr>
            <th align="right"><b>Instance types:</b></th>
            <th align="left" id="dialog_env_instance_types"></th>
          </tr>
          <tr>
            <th align="right"><b>Instance role:</b></th>
            <th align="left" id="dialog_env_instancerole"></th>
          </tr>
          <tr>
            <th align="right"><b>Spot fleet role:</b></th>
            <th align="left" id="dialog_env_spotfleetrole"></th>
          </tr>
          <tr>
            <th align="right"><b>EC2 Keypair:</b></th>
            <th align="left" id="dialog_env_keypair"></th>
          </tr>
          <tr>
            <th align="right"><b>AMI id:</b></th>
            <th align="left" id="dialog_env_amiid"></th>
          </tr>
          <tr>
            <th align="right"><b>vpcId:</b></th>
            <th align="left" id="dialog_env_vpcid"></th>
          </tr>
          <tr>
            <th align="right"><b>Subnets:</b></th>
            <th align="left" id="dialog_env_subnets"></th>
          </tr>
          <tr>
            <th align="right"><b>Security Groups:</b></th>
            <th align="left" id="dialog_env_securitygroups"></th>
          </tr>

        </table>





        <h3>EC2 Tags</h3>

        <table id="dialog_env_tag_table" class="paddingBetweenCols dynamicDialogTable">
          <tr>
            <th>Name</th>
            <th>Value</th>
          </tr>
        </table>

      </div>
      <div class="modal-footer">
        <button type="button" id="dialog_env_close" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

{# job modal #}
<div class="modal fade" id="job_dialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
          {#  FIXME this does not close #}
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="dialog_env_header">Job details</h4>
      </div>
      <div class="modal-body">

        <div id="displaying_child_job" style="display: none;">
            <p style="color: red; font-size: 200%;">
                Displaying Child Job information
            </p>
            <button id="return_to_parent_job">Return to Parent Job</button>
        </div>

        <h2>Job Status</h2>

        <div data-bind="with: job">


        <span data-bind="if: canCancel()"> {# FIXME #}
          <button data-bind="click: cancelJob" title="" >Cancel Job</button>
        </span>
        <span data-bind="if: canTerminate()"> {# FIXME #}
          <button data-bind="click: terminateJob" title="">Terminate Job</button>
        </span>
        <p>&nbsp;</p>
        <div data-bind="ifnot: $parent.isLoggedIn">
          <p>Log in to cancel and terminate jobs you own.</p>
        </div>


        <table border="0" class="paddingBetweenCols">
          <tr>
            <th align="right"><b>Status:</b></th>
            <th data-bind="text: status" align="left" ></th>
          </tr>
          <tr>
            <th align="right"><b>Created at:</b></th>
            <th data-bind="text: createdAt" align="left"></th>
          </tr>
          <tr>
            <th align="right"><b>Started at:</b></th>
            <th data-bind="text: startedAt" align="left"></th>
          </tr>
          <tr>
            <th align="right"><b>Queue:</b></th>
            <th data-bind="text: jobQueue" align="left"></th>
          </tr>
        </table>

        <h2>Job Attributes</h2>

        <table border="0" class="paddingBetweenCols">
          <tr>
            <th align="right"><b>Job id:</b></th>
            <th data-bind="text: jobId" align="left"></th>
          </tr>
          <tr>
            <th align="right"><b>Job name:</b></th>
            <th data-bind="text: jobName" align="left"></th>
          </tr>
          <tr>
            <th align="right"><b>Job Definition:</b></th>
            <th data-bind="text: jobDefinition" align="left"></th>
          </tr>
          <tr>
            <th align="right"><b>Depends on:</b></th>
            <th data-bind="text: dependsOnComputed()" align="left"></th>
          </tr>

        </table>

<div id="array_job_details" style="display: none;">
    <h2>Array Job</h2>

    <table id="array_job_status_table">
        <tr>
            <th>submitted</th>
            <th>pending</th>
            <th>runnable</th>
            <th>starting</th>
            <th>running</th>
            <th>failed</th>
            <th>succeeded</th>
        </tr>
        <tr>
            <td class="child_count" id="child_submitted_count"></td>
            <td class="child_count" id="child_pending_count"></td>
            <td class="child_count" id="child_runnable_count"></td>
            <td class="child_count" id="child_starting_count"></td>
            <td class="child_count" id="child_running_count"></td>
            <td class="child_count"id="child_failed_count"></td>
            <td class="child_count" id="child_succeeded_count"></td>

        </tr>
    </table>

    <p>&nbsp;</p>

    <table id="array_job_child_table">
        <tr id="array_job_child_table_header">
            <th>Job ID</th>
            <th>Job Name</th>
            <th>Status</th>
            <th>Created At</th>
        </tr>
        <tr id="job_child_status">
        </tr>
    </table>
</div>


<h2>Attempts</h2>

<table id="dialog_job_attempts" class="paddingBetweenCols dynamicDialogTable">
  <thead>
    <tr>
      <th>Attempts</th>
      <th>Exit code</th>
      <th>Start time</th>
      <th>End time</th>
  </thead>

  <tbody>

  </tbody>
</table>

<h2>Resource requirements</h2>

<table border="0" class="paddingBetweenCols">
  <tr>
    <th align="right"><b>Job role:</b></th>
    <th align="left" id="dialog_job_role"></th>
  </tr>
  <tr>
    <th align="right"><b>Container image:</b></th>
    <th align="left" id="dialog_job_containerimage"></th>
  </tr>
</table>



<h2>Environment</h2>

<table border="0" class="paddingBetweenCols">
  <tr>
    <th align="right"><b>Command:</b></th>
    <th align="left" class="breakMe" id="dialog_job_command"></th>
  </tr>
  <tr>
    <th align="right"><b>vCPUs:</b></th>
    <th align="left" id="dialog_job_vcpus"></th>
  </tr>
  <tr>
    <th align="right"><b>Memory:</b></th>
    <th align="left" id="dialog_job_memory"></th>
  </tr>

</table>

<h2>Environment variables</h2>

<table border="0" class="paddingBetweenCols dynamicDialogTable" id="dialog_job_envvars">
  <thead>
    <tr>
      <th align="right">Name</th>
      <th align="left">Value</th>
    </tr>
  </thead>
  <tbody>
  </tbody>

{#
  <tr>
    <th align="right"><b></b></th> ## key
    <th align="left"></th> ## value
  </tr>
#}
</table>


<h2>Parameters</h2>

<table border="0" class="paddingBetweenCols dynamicDialogTable" id="dialog_job_parameters">
  <thead>
    <tr>
      <th align="right">Name</th>
      <th align="left">Value</th>
    </tr>

  </thead>
  <tbody>
  </tbody>
{#
  <tr>
    <th align="right"><b></b></th> ## key
    <th align="left"></th> ## value
  </tr>
#}
</table>

<h2>uLimits</h2>

<table id="dialog_job_ulimits" class="paddingBetweenCols dynamicDialogTable">
  <thead>
    <tr>
      <th>Name</th>
      <th>Soft limit</th>
      <th>Hard limit</th>
  </thead>

  <tbody>

  </tbody>
</table>


<h2>Volumes</h2>

<table id="dialog_job_volumes" class="paddingBetweenCols dynamicDialogTable">
  <thead>
    <tr>
      <th>Name</th>
      <th>Source path</th>
  </thead>

  <tbody>

  </tbody>
</table>

<h2>Mount points</h2>

<p><b id="dialog_job_filesystemstatus">{# Read only filesystem #}</b></p>

<table id="dialog_job_mountpoints" class="paddingBetweenCols dynamicDialogTable">
  <thead>
    <tr>
      <th>Container path</th>
      <th>Source volume</th>
      <th>Read only</th>
  </thead>

  <tbody>

  </tbody>
</table>

<h2>CloudWatch logs</h2>

<p id="dialog_job_log_link"></p>


      </div>
      <div class="modal-footer">
        <button type="button" id="dialog_env_close" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

</div> {# end of data-bind context (job) #}

{# job definition modal #}
<div data-bind="with: jobDefinition">

    <div class="modal fade" id="jobdef_dialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close btn btn-default" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Job Definition <span id="dialog_jobdef_header"></span></h4>
          </div>
          <div class="modal-body">
            <h3>Job definition attributes</h3>

            <table border="0" class="paddingBetweenCols">
              <tr>
                <th align="right"><b>Job defninition name : revision: </b></th>
                <th align="left" data-bind="text: nameRevision()"></th>
              </tr>
              <tr>
                <th align="right"><b>Job definition ARN: </b></th>
                <th align="left" data-bind="text: jobDefinitionArn"></th>
              </tr>
              <tr>
                <th align="right"><b>Status: </b></th>
                <th align="left" data-bind="text: status"></th>
              </tr>
            </table>

            <h3>Resource Requirements</h3>

    <div data-bind="with: containerProperties">


                <table border="0" class="paddingBetweenCols">
                  <tr>
                    <th align="right"><b>Job role ARN: </b></th>
                    <th align="left" data-bind="text: jobRoleArn"></th>
                  </tr>
                  <tr>
                    <th align="right"><b>Image: </b></th>
                    <th align="left" data-bind="text: image"></th>
                  </tr>
                </table>

        <h3>Environment</h3>

        <table border="0" class="paddingBetweenCols">
          <tr>
            <th align="right"><b>Command: </b></th>
            <th class="breakMe" align="left" data-bind="text: computedCommand()"></th>
          </tr>
          <tr>
            <th align="right"><b>vCPUs: </b></th>
            <th align="left" data-bind="text: vcpus"></th>
          </tr>
          <tr>
            <th align="right"><b>Memory (MB): </b></th>
            <th align="left" data-bind="text: memory"></th>
          </tr>
        </table>

    </div>
    <h3>Retry Strategy</h3>

    <div data-bind="with: retryStrategy">
        <table border="0" class="paddingBetweenCols">
          <tr>
            <th align="right"><b>Attempts: </b></th>
            <th align="left" data-bind="text: attempts"></th>
          </tr>
        </table>
    </div>

    <h3>Parameters</h3>

    <table border="0" class="paddingBetweenCols dynamicDialogTable" id="dialog_jobdef_parameters">
      <thead>
        <tr>
            {#  TODO: finish knockoutifying this dialog #}
          <td align="right">Name</td>
          <td align="left">Value</td>
        </tr>
      </thead>
      <tbody>
      </tbody>
    {#
      <tr>
        <th align="right"><b></b></th> ## key
        <th align="left"></th> ## value
      </tr>
    #}
    </table>


    <h3>Environment variables</h3>

    <table border="0" class="paddingBetweenCols dynamicDialogTable" id="dialog_jobdef_envvars">
      <thead>
        <tr>
          <th align="right">Name</th>
          <th align="left">Value</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    {#
      <tr>
        <th align="right"><b></b></th> ## key
        <th align="left"></th> ## value
      </tr>
    #}
    </table>



    <h3>uLimits</h3>

    <table id="dialog_jobdef_ulimits" class="paddingBetweenCols dynamicDialogTable">
      <thead>
        <tr>
          <th>Name</th>
          <th>Soft limit</th>
          <th>Hard limit</th>
      </thead>

      <tbody>

      </tbody>
    </table>


    <h3>Volumes</h3>

    <table id="dialog_jobdef_volumes" class="paddingBetweenCols dynamicDialogTable">
      <thead>
        <tr>
          <th>Name</th>
          <th>Source path</th>
      </thead>

      <tbody>

      </tbody>
    </table>

    <h3>Mount points</h3>

    <p><b id="dialog_jobdef_filesystemstatus">{# Read only filesystem #}</b></p>

    <table id="dialog_jobdef_mountpoints" class="paddingBetweenCols dynamicDialogTable">
      <thead>
        <tr>
          <th>Container path</th>
          <th>Source volume</th>
          <th>Read only</th>
      </thead>

      <tbody>

      </tbody>
    </table>


          </div>
          <div class="modal-footer">
            <button type="button" id="dialog_queue_close" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
</div>

{# login modal #}

<div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Login</h4>
      </div>
      <div class="modal-body">
        <p>Log in with your HutchNet ID and password.</p>
        <form id="login_form">
          <table>
            <tr>
              <td>HutchNet ID:</td><td><input id="username"></td>
            </tr>
            <tr>
              <td>Password:</td><td><input id="password" type="password"></td>
            </tr>
          </table>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button data-bind="click: doLogin" type="button" class="btn btn-primary">Log In</button>
      </div>
    </div>
  </div>
</div>


{# submit job modal #}
<div data-bind="with: submitJob">
    <div class="modal fade" id="submit_job_dialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close btn btn-default" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="dialog_queue_header">Submit an AWS Batch Job</h4>
          </div>
          <div class="modal-body">
            <p>Select a job definition to run and apply any command, parameter, or environment variable overrides.</p>

            <h5>Job run-time</h5>

            <table border="0" class="paddingBetweenCols">
              <tr>
                <td align="right"><b>Job name: </b></td>
                <td align="left">
                    <input data-bind="value: name"/>
                </td>
              </tr>
              <tr>
                <td align="right"><b>Job definition: </b></td>
                <td align="left">
                    <select id="submit_job_definitions"
                    data-bind="options: $parent.jobDefinitionList,
                               value: selectedJobDef,
                               optionsCaption: 'Choose one...',
                               valueAllowUnset: false"
                      data-placeholder="Select a job definition...">
                    </select>
                </td>
              </tr>
              <tr>
                <td align="right"><b>Job Queue: </b></td>
                <td align="left">
                    <select id="submit_job_queues"
                    data-bind="options: $parent.queueList,
                               value: selectedQueue,
                               optionsCaption: 'Choose one...',
                               valueAllowUnset: false">
                        <option data-bind="text: $data"></option>
                    </select>
                </td>
              </tr>
              <tr>
                <td align="right"><b>Job Type: </b></td>
                <td align="left">
                    <p>
                        <input type="radio" value="single" name="job_type" data-bind="checked: $parent.jobType"/> Single<br/>
                        <input type="radio" value="array" name="job_type" data-bind="checked: $parent.jobType"/> Array<br/>
                    </p>
                </td>
              </tr>
              <!-- ko if: $parent.isSubmittingArrayJob -->
              <tr>
                  <td align="right"><b>Array Size: </b></td>
                  <td align="left">
                      <input data-bind="value: arraySize"
                      size="30"
                      placeholder="Enter a number higher than 1"/>
                  </td>
              </tr>
              <tr>
                  <td align="right"><b>N-to-N job dependencies: </b></td>
                  <td align="left">
                      <input data-bind="value: nToN"
                      size="40"
                      placeholder="optional: enter a jobId this will depend on"/>
                  </td>
              </tr>
              <tr>
                  <td align="right"><b>Run Children Sequentially: </b></td>
                  <td align="left">
                      <input type="checkbox" data-bind="checked: runChildrenSequentially"/>
                  </td>
              </tr>
              <!-- /ko -->

              <tr>
                  <td align="right"><b>Job Depends On: </b></td>
                  <td align="left">
                      <input data-bind="value: jobDependsOn"
                      size="40"
                      placeholder="optional: enter a jobId this will depend on"/>
                  </td>
              </tr>


            </table>

            <h4>Environment</h4>

            <table border="0" class="paddingBetweenCols">
              <tr>
                <td align="right"><b>Command: </b></td>
                <td align="left">

                    <ul class="nav nav-tabs">
                      <li class="active"><a data-toggle="tab" href="#spacedelimited">Space delimited</a></li>
                      <li><a data-toggle="tab" href="#json">JSON</a></li>
                    </ul>

                    <div class="tab-content">
                      <div id="spacedelimited" class="tab-pane fade in active">
                        <textarea data-bind="value: spaceDelimitedCommand, valueUpdate: 'input'"
                        placeholder="space delimited: echo 'hello world'"
                        rows="3"></textarea>

                        <p>Text is delimited by spaces and converted to a JSON array to be submitted with the job.</p>
                        <p><b>JSON result:</b></p>
                        <pre data-bind="text: jsonCommand">
                        </pre>
                      </div>
                      <div id="json" class="tab-pane fade">
                        <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam.</p>
                      </div>
                    </div>
                  </div>
                  <p>For more details on how the command field is used in your job definition, view the
                  <a target="_blank" href="http://docs.aws.amazon.com/batch/latest/userguide/job_definition_parameters.html#containerProperties">documentation</a>.</p>
                </td>
              </tr>
            </table>


            <h3>Compute Environments</h3>

            <table id="dialog_queue_env_table" class="paddingBetweenCols dynamicDialogTable">
              <tr>
                <th>Order</th>
                <th>Compute environment</th>
              </tr>
            </table>

          </div>
          <div class="modal-footer">
            <button type="button" id="dialog_queue_close" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
</div>

{# end modals #}


  <h1>AWS Batch Dashboard</h1>

  <span data-bind="ifnot: isLoggedIn"><button data-bind="click: login">Log in</button></span>
  <span data-bind="if: isLoggedIn"><button data-bind="click: logout">Log out</button></span>

Current user: <b><span id="username-display" data-bind="text: username"></span></b>
<span data-bind="ifnot: isLoggedIn">Log in to submit/cancel/terminate jobs</span>


<p>&nbsp</p>


<ul>
  <li><a href="#queues_header">Queues</a></li>
  <li><a href="#compute_environments_header">Compute Environments</a></li>
  <li><a href="#jobs_header">Jobs</a></li>
  <li><a href="#job_def_header">Job Definitions</a></li>
  <!-- ko if: okToSubmit -->
    <li><a id="submit_job">Submit Job</a></li>
  <!-- /ko -->
</ul>

{#
<span data-bind="if: okToSubmit"><button id="submit_job">Submit Job</button></span>
#}

  <div id="message" style="z-index: 9999; position : fixed; top: 0; right: 20%; padding: 5px 0 0 5px; height: 140px; width: 300px;">
      <div id="inner-message" style="display: none;" class="alert alert-info">
      </div>
  </div>


<h2 id="queues_header">Queues</h2>

    <div style="float: right; padding: 5px;">
      <img id="reload_queue_table" class="reload" src="/images/refresh.png" height="30" width="30" title="reload data"/>
    </div>

    <table id="queue_summary_table" class="display" style="float: none">
      <thead>
        <tr>
          <th>Name</th>
          <th>Priority</th>
          <th>SUBMITTED</th>
          <th>PENDING</th>
          <th>RUNNABLE</th>
          <th>STARTING</th>
          <th>RUNNING</th>
          <th>FAILED</th>
          <th>SUCCEEDED</th>
        </tr>
    </thead>
    </table>


<h2 id="compute_environments_header">Compute Environments</h2>

<div style="float: right; padding: 5px;">
  <img id="reload_env_table" class="reload" src="/images/refresh.png" height="30" width="30" title="reload data"/>
</div>


<table id="comp_env_table" class="display" style="float: none">
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Minimum vCPUs</th>
      <th>Desired vCPUs</th>
      <th>Maximum vCPUs</th>
    </tr>
  </thead>
</table>



<h2 id="jobs_header">Jobs</h2>

<div style="float: right; padding: 5px;">
  <img id="reload_job_table" class="reload" src="/images/refresh.png" height="30" width="30" title="reload data"/>
</div>


<table id="job_table" class="display" style="float: none">
  <thead>
    <tr>
      <th>Queue</th>
      <th>Job ID</th>
      <th>Job Name</th>
      <th>Status</th>
    </tr>
  </thead>

  <tfoot>
      <tr>
          <th>
              <select id="queue_filter">
              </select>
          </th>
          <th></th>
          <th></th>
          <th>
              <select id="state_filter">
                  <option>No Filter</option>
                  {% for state in states %}
                      <option>{{state}}</option>
                  {% endfor %}
              </select>
          </th>
      </tr>
  </tfoot>
</table>

<h2 id="job_def_header">Job Definitions</h2>

<div style="float: right; padding: 5px;">
  <img id="reload_jobdef_table" class="reload" src="/images/refresh.png" height="30" width="30" title="reload data"/>
</div>



<table id="job_def_table" class="display" style="float: none">
  <thead>
    <tr>
      <th>Name</th>
      <th>Revision</th>
      <th>vCPUs</th>
      <th>Memory</th>
      <th>Image</th>
    </tr>
  </thead>
</table>



    <div id="log" style="display: none;"></div>

<p>&nbsp;</p>

<p>
  <a target="_blank" href="https://fredhutch.github.io/aws-batch-at-hutch-docs/">[Documentation for AWS Batch at Fred Hutch]</a> |
  <a target="_blank" href="https://github.com/FredHutch/batch-dashboard">[Code/Report an Issue]</a>
</p>

{% endblock %}
